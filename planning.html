<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planning Mentors | MeanSet Academy</title>
<style>
body { font-family: Arial; padding: 20px; background: #f0f4f8; color: #333; }
h1 { text-align: center; color: #4a90e2; }
table { border-collapse: collapse; width: 100%; max-width: 900px; margin: 20px auto; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
th { background-color: #4a90e2; color: white; }
td.available { background-color: #2ecc71; color: white; cursor: pointer; }
td.booked { background-color: #e74c3c; color: white; }
td:hover.available { background-color: #27ae60; }
.retour { text-align: left; margin: 20px auto; max-width: 900px; }
.btn-retour { padding: 10px 20px; background: #357ABD; color: white; text-decoration: none; border-radius: 6px; }
.btn-retour:hover { background: #2d5d8b; }
</style>
</head>
<body>

<h1>Planning des Mentors</h1>

<div id="planning"></div>

<div class="retour">
  <a href="index.html" class="btn-retour">← Retour à l’accueil</a>
</div>

<script>
fetch("disponibilites.json")
.then(res => res.json())
.then(data => {
    const container = document.getElementById("planning");

    data.forEach(mentor => {
        const table = document.createElement("table");
        const caption = document.createElement("caption");
        caption.innerText = mentor.nom;
        caption.style.fontWeight = "bold";
        caption.style.fontSize = "1.2em";
        table.appendChild(caption);

        const days = ["Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi"];
        const allHours = [...new Set([].concat(...Object.values(mentor.disponibilites)))];

        const thead = document.createElement("thead");
        const trHead = document.createElement("tr");
        trHead.appendChild(document.createElement("th"));
        days.forEach(day => {
            const th = document.createElement("th");
            th.innerText = day;
            trHead.appendChild(th);
        });
        thead.appendChild(trHead);
        table.appendChild(thead);

        const tbody = document.createElement("tbody");
        allHours.forEach(hour => {
            const tr = document.createElement("tr");
            const tdHour = document.createElement("td");
            tdHour.innerText = hour;
            tr.appendChild(tdHour);

            days.forEach(day => {
                const td = document.createElement("td");
                if (mentor.disponibilites[day] && mentor.disponibilites[day].includes(hour)) {
                    td.className = "available";
                    td.innerText = "Libre";
                    td.addEventListener("click", () => {
                        if (confirm(`Réserver ${hour} le ${day} avec ${mentor.nom} ?`)) {
                            td.className = "booked";
                            td.innerText = "Réservé";
                        }
                    });
                } else {
                    td.innerText = "-";
                }
                tr.appendChild(td);
            });

            tbody.appendChild(tr);
        });

        table.appendChild(tbody);
        container.appendChild(table);
    });
});
</script>

</body>
</html>

